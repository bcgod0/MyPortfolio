<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>visitor@portfolio:~$</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;700&display=swap');

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --green: #00ff41;
    --green-dim: #00aa2a;
    --green-glow: rgba(0,255,65,0.15);
    --amber: #ffb000;
    --red: #ff3131;
    --cyan: #00ffff;
    --white: #e0e0e0;
    --bg: #0a0a0a;
  }

  html, body {
    height: 100%;
    background: var(--bg);
    color: var(--green);
    font-family: 'JetBrains Mono', 'Courier New', monospace;
    font-size: 14px;
    line-height: 1.6;
    overflow: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0,0,0,0.08) 2px,
      rgba(0,0,0,0.08) 4px
    );
    pointer-events: none;
    z-index: 9999;
  }

  body::after {
    content: '';
    position: fixed;
    inset: 0;
    background: radial-gradient(ellipse at center, transparent 60%, rgba(0,0,0,0.7) 100%);
    pointer-events: none;
    z-index: 9998;
  }

  #terminal {
    height: 100vh;
    display: flex;
    flex-direction: column;
    padding: 20px;
    overflow: hidden;
  }

  #titlebar {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid rgba(0,255,65,0.2);
    flex-shrink: 0;
  }

  .dot { width: 12px; height: 12px; border-radius: 50%; }
  .dot.red { background: #ff5f57; }
  .dot.yellow { background: #febc2e; }
  .dot.green { background: #28c840; }

  #titlebar-text {
    margin-left: auto;
    margin-right: auto;
    color: var(--green-dim);
    font-size: 12px;
    letter-spacing: 2px;
  }

  #output {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding-right: 4px;
    scroll-behavior: smooth;
  }

  #output::-webkit-scrollbar { width: 4px; }
  #output::-webkit-scrollbar-track { background: transparent; }
  #output::-webkit-scrollbar-thumb { background: var(--green-dim); border-radius: 2px; }

  .line {
    white-space: pre-wrap;
    word-break: break-word;
    overflow-wrap: break-word;
    max-width: 100%;
    animation: fadeIn 0.05s ease;
  }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

  .prompt-line { color: var(--green); }
  .prompt-line .user { color: var(--cyan); }
  .prompt-line .at { color: var(--green-dim); }
  .prompt-line .host { color: var(--green); }
  .prompt-line .path { color: var(--amber); }
  .prompt-line .dollar { color: var(--white); }

  .output-text { color: #b0e0b0; margin-left: 0; }
  .error-text { color: var(--red); }
  .highlight { color: var(--cyan); }
  .amber { color: var(--amber); }
  .green-bright { color: var(--green); font-weight: 700; }
  .dim { color: #555; }
  .ascii-art { color: var(--green); line-height: 1.2; font-size: 12px; }
  .success { color: #00ff41; font-weight: 700; }
  .section-header { color: var(--amber); font-weight: 700; }

  a:hover { text-decoration: underline; color: #00ff41 !important; }

  #input-area {
    display: flex;
    align-items: center;
    gap: 0;
    margin-top: 8px;
    flex-shrink: 0;
    padding-top: 8px;
    border-top: 1px solid rgba(0,255,65,0.1);
  }

  #prompt-prefix {
    white-space: nowrap;
    flex-shrink: 0;
  }

  #cmd-input {
    background: transparent;
    border: none;
    outline: none;
    color: var(--white);
    font-family: inherit;
    font-size: inherit;
    flex: 1;
    caret-color: var(--green);
  }

  .glitch {
    position: relative;
    animation: glitch 4s infinite;
  }
  @keyframes glitch {
    0%,94%,96%,100% { text-shadow: none; }
    95% { text-shadow: -2px 0 var(--red), 2px 0 var(--cyan); }
  }

  #boot-overlay {
    position: fixed;
    inset: 0;
    background: var(--bg);
    z-index: 9997;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: opacity 0.5s;
  }

  #boot-overlay.hide { opacity: 0; pointer-events: none; }

  .boot-line {
    color: var(--green-dim);
    font-size: 12px;
    opacity: 0;
    animation: bootAppear 0.1s forwards;
    text-align: left;
    width: 400px;
  }

  @keyframes bootAppear { to { opacity: 1; } }

  .progress-bar {
    width: 400px;
    height: 16px;
    border: 1px solid var(--green-dim);
    margin-top: 12px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: var(--green);
    width: 0%;
    animation: fillBar 2s ease forwards;
    animation-delay: 0.8s;
    box-shadow: 0 0 10px var(--green);
  }

  @keyframes fillBar { to { width: 100%; } }
</style>
</head>
<body>

<div id="boot-overlay">
  <div class="boot-line" style="animation-delay:0s; color: var(--green); font-size:16px; font-weight:700;">PORTFOLIO OS v2.4.1</div>
  <div class="boot-line" style="animation-delay:0.3s">Initializing system kernel...</div>
  <div class="boot-line" style="animation-delay:0.5s">Loading memory modules... <span style="color:var(--green)">OK</span></div>
  <div class="boot-line" style="animation-delay:0.7s">Mounting filesystem... <span style="color:var(--green)">OK</span></div>
  <div class="boot-line" style="animation-delay:0.9s">Starting network daemon... <span style="color:var(--green)">OK</span></div>
  <div class="progress-bar"><div class="progress-fill"></div></div>
  <div class="boot-line" style="animation-delay:2.8s; color:var(--cyan);">System ready. Type 'help' to begin.</div>
</div>

<div id="terminal">
  <div id="titlebar">
    <div class="dot red"></div>
    <div class="dot yellow"></div>
    <div class="dot green"></div>
    <div id="titlebar-text" class="glitch">visitor@portfolio: ~/home</div>
  </div>
  <div id="output"></div>
  <div id="input-area">
    <span id="prompt-prefix">
      <span class="prompt-line"><span class="user">visitor</span><span class="at">@</span><span class="host">portfolio</span><span class="at">:</span><span class="path" id="prompt-path">~</span><span class="dollar"> $ </span></span>
    </span>
    <input type="text" id="cmd-input" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" autofocus>
  </div>
</div>

<script>
const output = document.getElementById('output');
const input = document.getElementById('cmd-input');
const bootOverlay = document.getElementById('boot-overlay');
const promptPath = document.getElementById('prompt-path');

const DATA = {
  name: "Rijul Jain",
  title: "Full-Stack Developer & Cloud Engineer",
  location: "Ghaziabad, UP",
  email: "rijuljain75@gmail.com",
  github: "github.com/bcgod0",
  linkedin: "www.linkedin.com/in/jrijul",
  twitter: "@mcgod0",
  bio: "I build things for the web and occasionally break them to understand why. Passionate about security, distributed systems, and the intersection of art and code.",
  skills: {
    languages: ["Java", "C", "Rust"],
    frontend: ["React", "Next.js", "CSS/SCSS"],
    backend: ["Node.js", "FastAPI", "PostgreSQL", "Redis", "Docker", "K8s"],
    cloud: ["AWS Cloud Practitioner", "Azure", "GCP"],
  },
  experience: [
    { none for now :( },
  ],
  projects: {
    "palette_sync.txt": {
      name: "Palette Sync",
      desc: "A cloud-synced color palette manager featuring drag-and-drop reordering, contrast checking, physical paint mixing recipes, soft delete (recycle bin), and JSON import/export.",
      tech: "HTML, CSS, Vanilla JavaScript, Firebase Realtime Database, SortableJS",
      link: "github.com/bcgod0/palette-sync",
      status: "ACTIVE"
    },
    "screen_assistant.txt": {
      name: "Intelligent Screen Analysis Assistant",
      desc: "A Windows desktop utility that uses AI to capture, analyze, and extract insights from real-time screen regions.",
      tech: "Python, Google Gemini API (google-genai), Tkinter, Pillow, PyAutoGUI",
      link: "github.com/bcgod0/intelligent-screen-assistant",
      status: "ACTIVE"
    },
  }
};

const FS = {
  "~": ["projects/", "about/", "contact/", "resume.txt", ".secret/"],
  "~/projects": Object.keys(DATA.projects),
  "~/about": ["bio.txt", "skills.txt", "experience.txt"],
  "~/contact": ["contact.txt"],
  "~/.secret": ["???.txt"],
  "~/.secret/.classified": ["do_not_readme.txt"]
};

let cwd = "~";
let history = [];
let histIdx = -1;
let matrixMode = false;
let matrixInterval = null;

function print(text, cls = '') {
  const div = document.createElement('div');
  div.className = 'line ' + cls;
  div.innerHTML = text;
  output.appendChild(div);
  output.scrollTop = output.scrollHeight;
}

function printBlank() { print('&nbsp;'); }
function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }

function printPrompt(cmd) {
  print(`<span class="user">visitor</span><span class="dim">@</span><span class="green-bright">portfolio</span><span class="dim">:</span><span class="amber">${cwd}</span><span class="dim"> $ </span><span style="color:#e0e0e0">${escHtml(cmd)}</span>`, 'prompt-line');
}

function escHtml(s) {
  return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function updatePrompt() {
  const fullPath = cwd.replace('~', '/home/visitor');
  promptPath.textContent = fullPath;
  document.getElementById('titlebar-text').textContent = `visitor@portfolio: ${fullPath}`;
}

async function loadingBar(label, steps = 20, duration = 800) {
  const bar = document.createElement('div');
  bar.className = 'line output-text';
  output.appendChild(bar);
  output.scrollTop = output.scrollHeight;
  for (let i = 0; i <= steps; i++) {
    const pct = Math.round((i / steps) * 100);
    const filled = Math.round((i / steps) * 30);
    const empty = 30 - filled;
    bar.innerHTML = `${label} [<span class="green-bright">${'â–ˆ'.repeat(filled)}${'â–‘'.repeat(empty)}</span>] ${pct}%`;
    await sleep(duration / steps);
  }
}

const COMMANDS = {

  help() {
    printBlank();
    print(`<span class="section-header">â”Œâ”€ AVAILABLE COMMANDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>`);
    print(`<span class="section-header">â”‚</span>`);
    const cmds = [
      ['help', 'Show this help menu'],
      ['whoami', 'Display user info'],
      ['ls', 'List files in current directory'],
      ['cd &lt;dir&gt;', 'Change directory'],
      ['cat &lt;file&gt;', 'Read a file'],
      ['skills', 'View technical skills'],
      ['experience', 'View work history'],
      ['projects', 'List all projects'],
      ['contact', 'Get contact information'],
      ['clear', 'Clear the terminal'],
      ['pwd', 'Print working directory'],
      ['echo &lt;text&gt;', 'Echo text back'],
      ['history', 'Command history'],
      ['uname -a', 'System information'],
    ];
    cmds.forEach(([cmd, desc]) => {
      print(`<span class="section-header">â”‚</span>  <span class="highlight" style="display:inline-block;width:180px">${cmd}</span><span class="output-text">${desc}</span>`);
    });
    print(`<span class="section-header">â”‚</span>`);
    print(`<span class="section-header">â”‚</span>  <span class="dim">Hint: There are hidden commands. Keep digging...</span>`);
    print(`<span class="section-header">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>`);
    printBlank();
  },

  whoami() {
    printBlank();
    print(`<span class="highlight">  â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—</span>`, 'ascii-art');
    print(`<span class="highlight">  â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘</span>`, 'ascii-art');
    print(`<span class="highlight">  â–ˆâ–ˆâ•‘ â–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘</span>`, 'ascii-art');
    print(`<span class="highlight">  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘</span>`, 'ascii-art');
    print(`<span class="highlight">  â•šâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘</span>`, 'ascii-art');
    print(`<span class="highlight">   â•šâ•â•â•â•šâ•â•â• â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•     â•šâ•â•â•šâ•â•</span>`, 'ascii-art');
    printBlank();
    print(`  <span class="section-header">Name:</span>     <span class="output-text">${DATA.name}</span>`);
    print(`  <span class="section-header">Title:</span>    <span class="output-text">${DATA.title}</span>`);
    print(`  <span class="section-header">Location:</span> <span class="output-text">${DATA.location}</span>`);
    print(`  <span class="section-header">Status:</span>   <span class="success">â— AVAILABLE FOR WORK</span>`);
    printBlank();
    print(`  <span class="dim">${DATA.bio}</span>`);
    printBlank();
    print(`  <span class="dim">Try: ls, cd projects, skills, contact</span>`);
    printBlank();
  },

  ls() {
    const dir = FS[cwd];
    if (!dir) { print(`<span class="error-text">ls: cannot access '${cwd}': Permission denied</span>`); return; }
    printBlank();
    dir.forEach(item => {
      const isDir = item.endsWith('/');
      const isHidden = item.startsWith('.');
      if (isDir) print(`  <span class="highlight">${item}</span>`);
      else if (isHidden) print(`  <span class="dim">${item}</span>`);
      else print(`  <span class="output-text">${item}</span>`);
    });
    printBlank();
  },

  pwd() {
    print(`<span class="output-text">/home${cwd.replace('~', '/visitor')}</span>`);
  },

  cd(args) {
    const target = args[0];
    if (!target || target === '~') { cwd = '~'; updatePrompt(); return; }
    if (target === '..') {
      if (cwd === '~') { print(`<span class="output-text">Already at home directory.</span>`); return; }
      cwd = '~'; updatePrompt(); return;
    }
    const norm = target.startsWith('~/') ? target : `~/${target}`;
    if (FS[norm] !== undefined) { cwd = norm; updatePrompt(); }
    else print(`<span class="error-text">bash: cd: ${escHtml(target)}: No such file or directory</span>`);
  },

  async cat(args) {
    if (!args[0]) { print(`<span class="error-text">cat: missing file operand</span>`); return; }
    const file = args[0];

    if (DATA.projects[file]) {
      const p = DATA.projects[file];
      printBlank();
      await loadingBar(`Reading ${file}`, 15, 500);
      printBlank();
      print(`  <span class="section-header">PROJECT:</span>     <span class="green-bright">${p.name}</span>`);
      print(`  <span class="section-header">STATUS:</span>      <span class="${p.status === 'ACTIVE' ? 'success' : 'amber'}">${p.status}</span>`);
      print(`  <span class="section-header">TECH:</span>        <span class="output-text">${p.tech}</span>`);
      print(`  <span class="section-header">DESCRIPTION:</span> <span class="output-text">${p.desc}</span>`);
      print(`  <span class="section-header">REPO:</span>        <a href="https://${p.link}" style="color:#00ffff;text-decoration:none;" target="_blank">${p.link}</a>`);
      printBlank();
      return;
    }

    const staticFiles = {
      'resume.txt': () => {
        printBlank();
        print(`  <span class="green-bright">RIJUL JAIN</span>`);
        print(`  <span class="amber">Software Engineering | Cloud Computing | Java Development</span>`);
        printBlank();
        print(`  <span class="amber">SUMMARY</span>`);
        print(`  <span class="dim">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>`);
        print(`  <span class="output-text">Computer Science graduate with strong foundations in Core Java,</span>`);
        print(`  <span class="output-text">Data Structures, and algorithmic problem-solving. Currently</span>`);
        print(`  <span class="output-text">preparing for MCA entrance while strengthening practical</span>`);
        print(`  <span class="output-text">programming skills through hands-on implementations. Interested</span>`);
        print(`  <span class="output-text">in software engineering and cloud technologies.</span>`);
        printBlank();
        print(`  <span class="amber">EDUCATION</span>`);
        print(`  <span class="dim">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>`);
        print(`  <span class="green-bright">Bachelor of Science in Mathematics (BSC)</span>`);
        print(`  <span class="output-text">Jiwaji University  |  Year: 2023  |  CGPA: 7 / 10</span>`);
        printBlank();
        print(`  <span class="green-bright">Senior Secondary (12th)</span>`);
        print(`  <span class="output-text">M.P. Board â€” 2020</span>`);
        printBlank();
        print(`  <span class="green-bright">Secondary (10th)</span>`);
        print(`  <span class="output-text">C.B.S.E â€” 2018</span>`);
        printBlank();
        print(`  <span class="amber">PROJECTS</span>`);
        print(`  <span class="dim">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>`);
        print(`  <span class="green-bright">Palette Sync</span>`);
        print(`  <span class="output-text">A cloud-synced color palette manager featuring drag-and-drop</span>`);
        print(`  <span class="output-text">reordering, contrast checking, physical paint mixing recipes,</span>`);
        print(`  <span class="output-text">soft delete (recycle bin), and JSON import/export.</span>`);
        printBlank();
        print(`  <span class="green-bright">OminiView AI</span>`);
        print(`  <span class="output-text">A Windows desktop utility that uses AI to capture, analyze,</span>`);
        print(`  <span class="output-text">and extract insights from real-time screen regions.</span>`);
        printBlank();
        print(`  <span class="amber">SKILLS</span>`);
        print(`  <span class="dim">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>`);
        print(`  <span class="section-header">Programming:</span>    <span class="output-text">Java (Core, OOP), Basic C</span>`);
        print(`  <span class="section-header">Concepts:</span>       <span class="output-text">Data Structures, Algorithm Basics</span>`);
        print(`  <span class="section-header">Tools:</span>          <span class="output-text">VS Code, Git, Linux</span>`);
        print(`  <span class="section-header">Learning:</span>       <span class="output-text">Advanced Data Structures, AWS Cloud Fundamentals, DevOps Basics</span>`);
        printBlank();
        print(`  <span class="amber">CERTIFICATIONS</span>`);
        print(`  <span class="dim">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>`);
        print(`  <span class="output-text">AWS Academy Cloud Foundations â€” (Completed / In Progress)</span>`);
        printBlank();
        print(`  <span class="amber">ACHIEVEMENTS</span>`);
        print(`  <span class="dim">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>`);
        print(`  <span class="output-text">â€º Consistently practicing data structures and algorithm problems</span>`);
        print(`  <span class="output-text">â€º Strengthened logical problem-solving through hands-on coding practice</span>`);
        printBlank();
        print(`  <span class="amber">STRENGTHS</span>`);
        print(`  <span class="dim">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>`);
        print(`  <span class="output-text">â€º Strong analytical thinking</span>`);
        print(`  <span class="output-text">â€º Structured learning mindset</span>`);
        print(`  <span class="output-text">â€º Comfortable debugging and improving code</span>`);
        print(`  <span class="output-text">â€º Quick adaptability to new technologies</span>`);
        printBlank();
        print(`  <span class="dim">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>`);
        printBlank();
      },
      'bio.txt': () => {
        printBlank();
        print(`  <span class="output-text">${DATA.bio}</span>`);
        printBlank();
      },
      'skills.txt': () => COMMANDS.skills(),
      'experience.txt': () => COMMANDS.experience(),
      'contact.txt': () => COMMANDS.contact(),
      'do_not_readme.txt': async () => {
        printBlank();
        print(`<span class="error-text">âš   TOP SECRET â€” AUTHORIZED PERSONNEL ONLY</span>`);
        print(`<span class="dim">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>`);
        printBlank();
        print(`  <span class="output-text">You should not be here visitor.</span>`);
        print(`  <span class="output-text">CLEARANCE: Level 5</span>`);
        printBlank();
        print(`  <span class="amber">KNOWN TRAITS ABOUT THE CREATOR:</span>`);
        print(`  <span class="output-text">â€º Writes clean code at 2am</span>`);
        print(`  <span class="output-text">â€º Debugs by adding more console.logs</span>`);
        print(`  <span class="output-text">â€º Believes every problem is a DSA problem</span>`);
        printBlank();
        print(`  <span class="dim">Bored? Try typing: <span class="highlight">snake</span></span>`);
        print(`  <span class="dim">You didn't get this from me.</span>`);
        print(`  <span class="dim">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ END OF FILE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>`);
        printBlank();
      },
      '???.txt': async () => {
        printBlank();
        print(`<span class="amber">Decrypting file...</span>`);
        await loadingBar('Cracking encryption', 20, 1200);
        printBlank();
        print(`<span class="success">ACCESS GRANTED</span>`);
        printBlank();
        print(`<span class="green-bright">â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘</span>`);
        print(`<span class="green-bright">â–‘â–‘  YOU FOUND THE SECRET FILE!  â–‘â–‘</span>`);
        print(`<span class="green-bright">â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘</span>`);
        printBlank();
        print(`  <span class="dim">Achievement unlocked: <span class="highlight">ğŸ”“ Deep Diver</span></span>`);
        printBlank();
        print(`  <span class="output-text">If you've made it this far, I'm impressed.</span>`);
        print(`  <span class="output-text">Now you have unlocked new secrets - "ls -la"</span>`);
        print(`  <a href="mailto:${DATA.email}" style="color:#00ffff;text-decoration:none;" target="_blank">  â†’ ${DATA.email}</a>`);
        printBlank();
      }
    };

    if (staticFiles[file]) { await staticFiles[file](); }
    else print(`<span class="error-text">cat: ${escHtml(file)}: No such file or directory</span>`);
  },

  skills() {
    printBlank();
    print(`  <span class="section-header">â”€â”€ TECHNICAL SKILLS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>`);
    Object.entries(DATA.skills).forEach(([cat, items]) => {
      printBlank();
      print(`  <span class="amber">${cat.toUpperCase()}</span>`);
      print(`  <span class="output-text">${items.join('  Â·  ')}</span>`);
    });
    printBlank();
  },

  experience() {
    printBlank();
    print(`  <span class="section-header">â”€â”€ WORK EXPERIENCE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>`);
    DATA.experience.forEach(e => {
      printBlank();
      print(`  <span class="green-bright">${e.role}</span>  <span class="dim">@</span>  <span class="highlight">${e.company}</span>    <span class="dim">${e.period}</span>`);
      print(`  <span class="output-text">â””â”€â”€ ${e.desc}</span>`);
    });
    printBlank();
  },

  projects() {
    printBlank();
    print(`  <span class="section-header">â”€â”€ PROJECTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>`);
    printBlank();
    Object.entries(DATA.projects).forEach(([file, p]) => {
      print(`  <span class="highlight">${file.padEnd(28)}</span> <span class="${p.status === 'ACTIVE' ? 'success' : 'amber'}">[${p.status}]</span>`);
      print(`  <span class="dim"> â””â”€â”€ ${p.desc}</span>`);
      printBlank();
    });
    print(`  <span class="dim">Use 'cat &lt;filename&gt;' to read any project file.</span>`);
    printBlank();
  },

  async contact() {
    printBlank();
    await loadingBar('Establishing secure channel', 15, 600);
    printBlank();
    print(`<span class="success">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span>`);
    print(`<span class="success">â–ˆâ–ˆ                                          â–ˆâ–ˆ</span>`);
    print(`<span class="success">â–ˆâ–ˆ    âœ“  SECURE CONNECTION ESTABLISHED      â–ˆâ–ˆ</span>`);
    print(`<span class="success">â–ˆâ–ˆ                                          â–ˆâ–ˆ</span>`);
    print(`<span class="success">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span>`);
    printBlank();
    print(`  <span class="section-header">EMAIL:</span>    <a href="mailto:${DATA.email}" style="color:#00ffff;text-decoration:none;" target="_blank">${DATA.email}</a>`);
    print(`  <span class="section-header">GITHUB:</span>   <a href="https://${DATA.github}" style="color:#00ffff;text-decoration:none;" target="_blank">${DATA.github}</a>`);
    print(`  <span class="section-header">LINKEDIN:</span> <a href="https://${DATA.linkedin}" style="color:#00ffff;text-decoration:none;" target="_blank">${DATA.linkedin}</a>`);
    print(`  <span class="section-header">TWITTER:</span>  <a href="https://twitter.com/${DATA.twitter.replace('@','')}" style="color:#00ffff;text-decoration:none;" target="_blank">${DATA.twitter}</a>`);
    printBlank();
  },

  clear() { output.innerHTML = ''; },

  uname() {
    print(`<span class="output-text">PortfolioOS 2.4.1 PORTFOLIO #1 SMP ${new Date().toDateString()} x86_64 GNU/Linux</span>`);
  },

  echo(args) {
    print(`<span class="output-text">${escHtml(args.join(' '))}</span>`);
  },

  history() {
    printBlank();
    history.forEach((cmd, i) => {
      print(`  <span class="dim">${String(i+1).padStart(3)}</span>  <span class="output-text">${escHtml(cmd)}</span>`);
    });
    printBlank();
  },

  // â”€â”€ EASTER EGGS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  async hack() {
    printBlank();
    print(`<span class="amber">Initiating hack sequence...</span>`);
    await loadingBar('Bypassing firewall', 20, 1000);
    await loadingBar('Decrypting mainframe', 20, 800);
    await loadingBar('Extracting data', 20, 600);
    printBlank();
    print(`<span class="error-text">ALERT: INTRUSION DETECTED â€” Just kidding ğŸ˜„</span>`);
    printBlank();
    print(`<span class="output-text">Nice try, script kiddie. But I like your enthusiasm.</span>`);
    print(`<span class="dim">â†’ Try 'contact' if you want to collaborate on real security work.</span>`);
    printBlank();
  },

  async sudo() {
    print(`<span class="error-text">[sudo] password for visitor: </span>`);
    await sleep(2000);
    print(`<span class="error-text">visitor is not in the sudoers file. This incident will be reported.</span>`);
    await sleep(500);
    print(`<span class="dim">(just kidding)</span>`);
  },

  async matrix() {
    if (matrixMode) {
      clearInterval(matrixInterval);
      matrixMode = false;
      print(`<span class="output-text">Exiting the Matrix...</span>`);
      return;
    }
    matrixMode = true;
    print(`<span class="green-bright">Entering the Matrix... (run 'matrix' again to exit)</span>`);
    const chars = 'ï½¦ï½§ï½¨ï½©ï½ªï½«ï½¬ï½­ï½®ï½¯ï½°ï½±ï½²ï½³ï½´ï½µï½¶ï½·ï½¸ï½¹ï½ºï½»ï½¼ï½½ï½¾ï½¿ï¾€ï¾ï¾‚ï¾ƒï¾„ï¾…ï¾†ï¾‡ï¾ˆï¾‰ï¾Šï¾‹ï¾Œï¾ï¾ï¾ï¾ï¾‘ï¾’ï¾“ï¾”ï¾•ï¾–ï¾—ï¾˜ï¾™ï¾šï¾›ï¾œï¾0123456789ABCDEF';
    matrixInterval = setInterval(() => {
      const row = Array.from({length: 60}, () => chars[Math.floor(Math.random()*chars.length)]).join('');
      const d = document.createElement('div');
      d.className = 'line';
      d.style.color = `hsl(${120 + Math.random()*30}, 100%, ${40+Math.random()*30}%)`;
      d.style.fontSize = '11px';
      d.textContent = row;
      output.appendChild(d);
      output.scrollTop = output.scrollHeight;
      if (output.children.length > 200) output.removeChild(output.firstChild);
    }, 80);
  },

  async coffee() {
    printBlank();
    print(`<span class="amber">       ( (</span>`);
    print(`<span class="amber">        ) )</span>`);
    print(`<span class="amber">     .______.</span>`);
    print(`<span class="amber">     |      |]</span>`);
    print(`<span class="amber">     \\      /</span>`);
    print(`<span class="amber">      '----'</span>`);
    printBlank();
    print(`  <span class="output-text">â˜• Brewing coffee... This might take a while.</span>`);
    await loadingBar('Brewing', 10, 1500);
    print(`  <span class="success">Coffee ready! Now I can code for 8 more hours.</span>`);
    printBlank();
  },

  async ssh(args) {
    const host = args[0] || 'unknown';
    print(`<span class="output-text">ssh: connect to host ${escHtml(host)} port 22:</span>`);
    await sleep(1000);
    print(`<span class="error-text">Connection refused. (Or maybe you found an easter egg?)</span>`);
    print(`<span class="dim">Hint: Try 'ssh root@localhost'</span>`);
  },

  async 'ssh root@localhost'() {
    print(`<span class="amber">root@localhost's password:</span>`);
    await sleep(1500);
    print(`<span class="error-text">Permission denied (publickey,password).</span>`);
    await sleep(300);
    print(`<span class="dim">Achievement unlocked: <span class="highlight">ğŸ” Persistence</span></span>`);
  },

  'rm -rf /'() {
    print(`<span class="error-text">rm: it is dangerous to operate recursively on '/'</span>`);
    print(`<span class="error-text">rm: use --no-preserve-root to override this failsafe</span>`);
    print(`<span class="dim">Nice try. Portfolio stays intact. ğŸ˜„</span>`);
  },

  async 'ls -la'() {
    printBlank();
    const now = new Date().toLocaleDateString('en-US',{month:'short',day:'2-digit'});
    const files = [
      `drwxr-xr-x  visitor  staff   160 ${now} <span class="highlight">./</span>`,
      `drwxr-xr-x  visitor  staff   128 ${now} <span class="dim">../</span>`,
      `drwxr-xr-x  visitor  staff    96 ${now} <span class="highlight">projects/</span>`,
      `drwxr-xr-x  visitor  staff    64 ${now} <span class="highlight">about/</span>`,
      `drwxr-xr-x  visitor  staff    64 ${now} <span class="highlight">contact/</span>`,
      `-rw-r--r--  visitor  staff  2048 ${now} <span class="output-text">resume.txt</span>`,
      `drwx------  visitor  staff    32 ${now} <span class="amber">.secret/</span>`,
      `drwx------  visitor  staff   ??? ${now} <span class="error-text">.classified/</span>`,
    ];
    files.forEach(f => print(`  <span class="dim">${f}</span>`));
    printBlank();
    print(`  <span class="dim">Hint: Try exploring hidden directories...</span>`);
    printBlank();
  },

  'cd .classified'() {
    cwd = '~/.secret/.classified';
    updatePrompt();
  },

  'cd .secret'() {
    cwd = '~/.secret';
    updatePrompt();
  },


  joke() {
    const jokes = [
      "Why do programmers prefer dark mode? Because light attracts bugs.",
      "There are only 10 types of people: those who understand binary and those who don't.",
      "A SQL query walks into a bar, walks up to two tables and asks... 'Can I join you?'",
      "Why do Java developers wear glasses? Because they don't C#.",
      "I would tell you a UDP joke, but you might not get it.",
    ];
    printBlank();
    print(`  <span class="amber">${jokes[Math.floor(Math.random()*jokes.length)]}</span>`);
    printBlank();
  },

  ping(args) {
    const host = args[0] || 'localhost';
    printBlank();
    for (let i = 0; i < 4; i++) {
      const ms = Math.floor(Math.random()*20+1);
      print(`  <span class="output-text">64 bytes from ${escHtml(host)}: icmp_seq=${i+1} ttl=64 time=${ms}.${Math.floor(Math.random()*9)} ms</span>`);
    }
    printBlank();
    print(`  <span class="dim">--- ${escHtml(host)} ping statistics ---</span>`);
    print(`  <span class="output-text">4 packets transmitted, 4 received, 0% packet loss</span>`);
    printBlank();
  },

  async nmap() {
    printBlank();
    print(`<span class="amber">Starting Nmap 7.94 scan...</span>`);
    await loadingBar('Scanning ports', 15, 800);
    printBlank();
    print(`  <span class="output-text">PORT      STATE   SERVICE</span>`);
    print(`  <span class="output-text">22/tcp    open    ssh</span>`);
    print(`  <span class="output-text">80/tcp    open    http</span>`);
    print(`  <span class="output-text">443/tcp   open    https</span>`);
    print(`  <span class="dim">1337/tcp  open    ???</span>`);
    printBlank();
    print(`  <span class="dim">Nmap done: 1 IP address scanned</span>`);
    printBlank();
  },

  banner() {
    printBlank();
    print(`<span class="highlight">  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— </span>`, 'ascii-art');
    print(`<span class="highlight">  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—</span>`, 'ascii-art');
    print(`<span class="highlight">  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘</span>`, 'ascii-art');
    print(`<span class="highlight">  â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘</span>`, 'ascii-art');
    print(`<span class="highlight">  â–ˆâ–ˆâ•‘     â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•</span>`, 'ascii-art');
    print(`<span class="highlight">  â•šâ•â•      â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•   â•šâ•â•   â•šâ•â•      â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•šâ•â• â•šâ•â•â•â•â•â• </span>`, 'ascii-art');
    printBlank();
    print(`  <span class="dim">Â© ${new Date().getFullYear()} ${DATA.name} â€” All rights reserved.</span>`);
    printBlank();
  },

  date() { print(`<span class="output-text">${new Date().toString()}</span>`); },

  uptime() {
    const mins = Math.floor(Math.random()*60+30);
    print(`<span class="output-text"> ${new Date().toTimeString().split(' ')[0]} up ${mins} min, 1 user, load average: 0.${Math.floor(Math.random()*99)}, 0.${Math.floor(Math.random()*99)}, 0.${Math.floor(Math.random()*99)}</span>`);
  },

  // â”€â”€ SNAKE GAME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  snake: (() => {
    let gameLoop = null;
    let active = false;
    let snake, dir, nextDir, food, score, speed;
    const W = 20, H = 10; // grid size

    function randFood(sn) {
      let pos;
      do {
        pos = { x: Math.floor(Math.random()*W), y: Math.floor(Math.random()*H) };
      } while (sn.some(s => s.x === pos.x && s.y === pos.y));
      return pos;
    }

    function renderGrid() {
      // Remove old grid lines
      const lines = output.querySelectorAll('.snake-grid');
      lines.forEach(l => l.remove());

      const top    = 'â”Œ' + 'â”€'.repeat(W*2) + 'â”';
      const bottom = 'â””' + 'â”€'.repeat(W*2) + 'â”˜';

      function addLine(html) {
        const d = document.createElement('div');
        d.className = 'line snake-grid';
        d.innerHTML = html;
        output.appendChild(d);
      }

      addLine(`  <span class="dim">${top}</span>   <span class="section-header">SCORE: ${score}</span>  <span class="dim">Speed: ${speed}</span>`);

      for (let y = 0; y < H; y++) {
        let row = 'â”‚';
        for (let x = 0; x < W; x++) {
          const isHead = snake[0].x === x && snake[0].y === y;
          const isBody = snake.slice(1).some(s => s.x === x && s.y === y);
          const isFood = food.x === x && food.y === y;
          if (isHead)       row += 'â–ˆâ–ˆ';
          else if (isBody)  row += 'â–‘â–‘';
          else if (isFood)  row += '##';
          else              row += '  ';
        }
        row += 'â”‚';
        let lineHtml = '  <span class="dim">â”‚</span>';
        for (let x = 0; x < W; x++) {
          const isHead = snake[0].x === x && snake[0].y === y;
          const isBody = snake.slice(1).some(s => s.x === x && s.y === y);
          const isFood = food.x === x && food.y === y;
          if (isHead)       lineHtml += `<span class="green-bright">â–ˆâ–ˆ</span>`;
          else if (isBody)  lineHtml += `<span class="success">â–‘â–‘</span>`;
          else if (isFood)  lineHtml += `<span class="error-text">##</span>`;
          else              lineHtml += '  ';
        }
        lineHtml += '<span class="dim">â”‚</span>';
        addLine(lineHtml);
      }

      addLine(`  <span class="dim">${bottom}</span>   <span class="dim">WASD or arrow keys to move. 'snake stop' to quit.</span>`);
      output.scrollTop = output.scrollHeight;
    }

    function tick() {
      dir = nextDir;
      const head = { x: snake[0].x + dir.x, y: snake[0].y + dir.y };

      // wall collision
      if (head.x < 0 || head.x >= W || head.y < 0 || head.y >= H) {
        endGame('Hit the wall!'); return;
      }
      // self collision
      if (snake.some(s => s.x === head.x && s.y === head.y)) {
        endGame('Bit yourself!'); return;
      }

      snake.unshift(head);

      if (head.x === food.x && head.y === food.y) {
        score += 10;
        speed = Math.max(1, Math.floor(score / 50));
        food = randFood(snake);
        clearInterval(gameLoop);
        gameLoop = setInterval(tick, Math.max(80, 300 - score * 2));
      } else {
        snake.pop();
      }

      renderGrid();
    }

    function endGame(reason) {
      clearInterval(gameLoop);
      gameLoop = null;
      active = false;

      // Remove grid
      output.querySelectorAll('.snake-grid').forEach(l => l.remove());

      printBlank();
      print(`  <span class="error-text">â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span>`);
      print(`  <span class="error-text">â•‘       GAME OVER ğŸ’€           â•‘</span>`);
      print(`  <span class="error-text">â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>`);
      print(`  <span class="output-text">Reason: <span class="amber">${reason}</span></span>`);
      print(`  <span class="output-text">Final Score: <span class="green-bright">${score}</span></span>`);
      printBlank();
      print(`  <span class="dim">Type 'snake' to play again.</span>`);
      printBlank();
    }

    function startGame() {
      active = true;
      score = 0;
      speed = 1;
      snake = [
        { x: 5, y: 5 }, { x: 4, y: 5 }, { x: 3, y: 5 }
      ];
      dir = { x: 1, y: 0 };
      nextDir = { x: 1, y: 0 };
      food = randFood(snake);

      printBlank();
      print(`  <span class="green-bright">â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span>`);
      print(`  <span class="green-bright">â•‘         S N A K E            â•‘</span>`);
      print(`  <span class="green-bright">â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>`);
      printBlank();
      print(`  <span class="dim">â–ˆâ–ˆ = head   â–‘â–‘ = body   <span class="error-text">##</span> = food</span>`);
      print(`  <span class="dim">Use W A S D or arrow keys to move.</span>`);
      print(`  <span class="dim">Type 'snake stop' to quit.</span>`);
      printBlank();

      renderGrid();
      gameLoop = setInterval(tick, 300);
    }

    // keyboard handler
    const keyHandler = (e) => {
      if (!active) return;
      const map = {
        'ArrowUp':    { x:0,  y:-1 },
        'ArrowDown':  { x:0,  y:1  },
        'ArrowLeft':  { x:-1, y:0  },
        'ArrowRight': { x:1,  y:0  },
        'w': { x:0,  y:-1 },
        's': { x:0,  y:1  },
        'a': { x:-1, y:0  },
        'd': { x:1,  y:0  },
        'W': { x:0,  y:-1 },
        'S': { x:0,  y:1  },
        'A': { x:-1, y:0  },
        'D': { x:1,  y:0  },
      };
      if (map[e.key]) {
        const nd = map[e.key];
        // prevent reversing
        if (nd.x !== -dir.x || nd.y !== -dir.y) {
          nextDir = nd;
        }
        e.preventDefault();
      }
    };
    document.addEventListener('keydown', keyHandler);

    const handler = function(args) {
      if (args[0] === 'stop') {
        if (active) endGame('You quit.');
        else print(`<span class="dim">No active game. Type 'snake' to start.</span>`);
        return;
      }
      if (active) {
        print(`<span class="amber">Game already running! Use WASD to play or type 'snake stop' to quit.</span>`);
        return;
      }
      startGame();
    };

    Object.defineProperty(handler, '_active', { get: () => active });
    return handler;
  })(),

};

// â”€â”€ DISPATCH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

async function run(raw) {
  const trimmed = raw.trim();
  if (!trimmed) return;

  history.push(trimmed);
  histIdx = history.length;
  printPrompt(trimmed);

  // If snake is active, block other commands (use snake stop to quit)
  if (COMMANDS.snake._active && trimmed.toLowerCase() !== 'snake stop') {
    print(`<span class="amber">Snake is running! Use WASD keys to play, or type 'snake stop' to quit.</span>`);
    return;
  }

  const parts = trimmed.split(/\s+/);
  const cmd = parts[0].toLowerCase();
  const args = parts.slice(1);

  if (COMMANDS[trimmed.toLowerCase()]) {
    await COMMANDS[trimmed.toLowerCase()](args);
    return;
  }

  if (COMMANDS[cmd]) {
    await COMMANDS[cmd](args);
    return;
  }

  print(`<span class="error-text">bash: ${escHtml(cmd)}: command not found</span>`);
  print(`<span class="dim">Type 'help' for available commands.</span>`);
}

// â”€â”€ INPUT HANDLING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

input.addEventListener('keydown', async (e) => {
  if (e.key === 'Enter') {
    const val = input.value;
    input.value = '';
    await run(val);
  } else if (e.key === 'ArrowUp') {
    e.preventDefault();
    if (histIdx > 0) { histIdx--; input.value = history[histIdx]; }
  } else if (e.key === 'ArrowDown') {
    e.preventDefault();
    if (histIdx < history.length - 1) { histIdx++; input.value = history[histIdx]; }
    else { histIdx = history.length; input.value = ''; }
  } else if (e.key === 'l' && e.ctrlKey) {
    e.preventDefault();
    output.innerHTML = '';
  } else if (e.key === 'Tab') {
    e.preventDefault();
    const partial = input.value.trim();
    const matches = Object.keys(COMMANDS).filter(c => c.startsWith(partial));
    if (matches.length === 1) input.value = matches[0];
    else if (matches.length > 1) print(`<span class="dim">${matches.join('  ')}</span>`);
  }
});

document.addEventListener('click', () => input.focus());
document.addEventListener('keydown', () => input.focus());

// â”€â”€ BOOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

async function boot() {
  await sleep(3200);
  bootOverlay.classList.add('hide');
  await sleep(600);
  bootOverlay.remove();
  printBlank();
  print(`<span class="green-bright">Welcome to my Portfolio terminal.</span>`);
  printBlank();
  print(`<span class="output-text">  User:     <span class="highlight">visitor</span>  (you)</span>`);
  print(`<span class="output-text">  Host:     <span class="highlight">rijuljain.dev</span></span>`);
  print(`<span class="output-text">  Kernel:   <span class="highlight">PortfolioOS 2.4.1</span></span>`);
  print(`<span class="output-text">  Shell:    <span class="highlight">bash 5.2</span></span>`);
  printBlank();
  print(`<span class="dim">Type <span class="highlight">help</span> to see available commands. Some commands are hidden â€” explore!</span>`);
  printBlank();
  input.focus();
}

boot();
</script>
</body>
</html>
